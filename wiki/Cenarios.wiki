#summary Cenários a serem estudados

== Definição dos Cenários ==

Após os estudos bibliográficos sobre o protocolo MIPv6 e a preparação de um ambiente de testes que permite a simulação de cenários. Iniciou-se a etapa para definir os cenários que permitiriam analisar o comportamento e testar a funcionalidade do protocolo.

Para analisar alguns mecanismos do protocolo e testar seus modos de operação, dois cenários base foram definidos. No primeiro cenário uma comunicação entre um dispositivo móvel e um dispositivo estático, no segundo comunicação entre dois dispositivos móveis. Nos dois cenários serão testados os dois modos de operação do protocolo MIPv6, o primeiro com tunelamento bidirecional e o segundo com otimização de roteamento.

== Cenário 1 ==

No primeiro cenário será apresentado o movimento do nó móvel da sua rede domiciliar para uma rede estrangeira e depois o retorno para sua rede, e durante o decorrer deste processo estará estabelecida uma comunicação entre o nó móvel e um nó correspondente. A topologia da rede pode ser observada na figura abaixo.

Este cenário mostra três redes, na rede com o prefixo 2000:a:: está presente um roteador que  oferece o serviço de agente domiciliar e o nó móvel, na rede com prefixo 2000:c:: está o nó correspondente com que o nó móvel está se comunicando. E para rede com prefixo 2000:d:: que o nó móvel se move.

Segue abaixo o script que inicia as máquinas e os _switches_ virtuais.
{{{
#!/bin/sh

# script que gera cenario 1
WD=~/vm
TOOLS=$WD/tools
FSYS=DebianFS
LINUX=$WD/linux

echo "Iniciando Cenario 1"

echo "Limpando cows"
rm $WD/cow-*

echo "Limpando pipes"
rm /tmp/net*

echo "Lancamento dos switches"

xterm -geometry 80x5 -T NET100 -e "$TOOLS/uml_switch_mob -mob -unix /tmp/net100.ctl"  &
xterm -geometry 80x5 -T NET200 -e "$TOOLS/uml_switch  -unix /tmp/net200.ctl"  &
xterm -geometry 80x5 -T NETGEN -e "$TOOLS/uml_switch  -unix /tmp/netgen.ctl"  & 
sleep 2

echo "Lançamento das maquinas virtuais UML"
xterm -T Mobile -e "$LINUX umid=MN  ubda=$WD/cow-MN,$WD/$FSYS mem=128M \
eth0=daemon,,,/tmp/net100.ctl" &
sleep 1

xterm -T AR1 -e "$LINUX umid=AR1 ubda=$WD/cow-AR1,$WD/$FSYS mem=128M \
eth0=daemon,,,/tmp/net100.ctl eth1=daemon,,,/tmp/netgen.ctl" &
sleep 2

xterm  -T Correspondent -e "$LINUX umid=CN ubda=$WD/cow-CN,$WD/$FSYS \
mem=128M eth0=daemon,,,/tmp/net200.ctl" &
sleep 1

xterm -T AR2 -e "$LINUX umid=AR2 ubda=$WD/cow-AR2,$WD/$FSYS mem=128M \
eth0=daemon,,,/tmp/net200.ctl eth1=daemon,,,/tmp/netgen.ctl" &
sleep 1

xterm -T AR3 -e "$LINUX umid=AR3 ubda=$WD/cow-AR3,$WD/$FSYS mem=128M \
eth0=daemon,,,/tmp/net100.ctl \ eth1=daemon,,,/tmp/netgen.ctl" &

PID=`ps x | grep mob | tail -2 | head -1 | cut -c 1-5`
echo "Pressione <enter> para se movimentar"
read a
echo $PID
kill -USR1 $PID
echo "Pressione <enter> para retornar rede"
read a
kill -USR1 $PID
sleep 0.2
kill -USR1 $PID
sleep 0.2
kill -USR1 $PID
sleep 0.2
kill -USR1 $PID

echo "Pressione <enter> para parar"
read a
kill $(pidof linux)
kill $(pidof xterm)
}}}